process {
    errorStrategy = { task.exitStatus in ((130..145) + 104 + 125) ? "retry" : "finish" }
    maxRetries    = 0
    maxErrors     = "-1"
    env.GOOGLE_APPLICATION_CREDENTIALS = "$GOOGLE_APPLICATION_CREDENTIALS"

    cpus = 1
    memory = 6.GB
    time = 2.h

    withLabel:process_long {
        cpus = 2
        memory = { 12.GB * task.attempt }
        time = { 48.h * task.attempt }
    }
    withLabel:process_low {
        cpus = 4
        memory = { 12.GB * task.attempt }
        time = { 4.h * task.attempt }
    }
    withLabel:process_low_long {
        cpus = 8
        memory = { 18.GB * task.attempt }
        time = { 48.h * task.attempt }
    }
    withLabel:process_medium {
        cpus = 8
        memory = { 36.GB * task.attempt }
        time = { 8.h * task.attempt }
    }
    withLabel:process_high {
        cpus = 14
        memory = { 72.GB * task.attempt }
        time = { 12.h * task.attempt }
        maxRetries = 3
    }
}

